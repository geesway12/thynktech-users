import{db,saveDb,loadDb}from"./db.js";import{registerServiceWorker}from"./pwa.js";import{renderPatientList}from"./patients.js";import{renderVisitLog}from"./visits.js";import{renderReports}from"./reports.js";import{renderServiceVisitSelector}from"./services.js";import{renderUserDashboard}from"./users.js";import{renderAppointmentForm}from"./appointments.js";import{renderLogin}from"./auth.js";function router(){const e=document.getElementById("app");if(!db.currentUser)return window.location.hash="#login",void renderLogin(e);const r=window.location.hash;if("#login"===r)renderLogin(e);else if("#user-dashboard"===r||""===r)renderUserDashboard(e);else if("#patient-reg"===r||"#patient-list"===r)renderPatientList(e);else if("#visit-log"===r)renderVisitLog(e);else if("#reports"===r)renderReports(e);else if("#profile"===r)import("./profile.js").then(r=>r.renderProfile(e));else if(r.startsWith("#appointment")){const t=r.split("-")[1],i=db.patients?.find(e=>e.patientID===t);i?renderAppointmentForm(i):renderUserDashboard(e)}else r.startsWith("#service-entry")?renderServiceVisitSelector(e):renderUserDashboard(e)}window.addEventListener("hashchange",router),window.addEventListener("load",()=>{loadDb(),registerServiceWorker(),router()});