import{db,saveDb}from"./db.js";export function renderLogin(e){e.innerHTML='\n    <div class="container my-5">\n      <div class="row justify-content-center">\n        <div class="col-12 col-md-6 col-lg-4">\n          <div class="card shadow">\n            <div class="card-header bg-primary text-white">\n              <h2 class="mb-0"><i class="bi bi-person-lock"></i> Thynktech Login</h2>\n            </div>\n            <div class="card-body">\n              <form id="loginForm" autocomplete="off">\n                <div class="mb-3">\n                  <input type="text" class="form-control" id="username" placeholder="Username" required autofocus>\n                </div>\n                <div class="mb-3">\n                  <input type="password" class="form-control" id="password" placeholder="Password" required>\n                </div>\n                <button type="submit" class="btn btn-primary w-100"><i class="bi bi-box-arrow-in-right"></i> Login</button>\n              </form>\n              <div id="loginError" class="alert alert-danger mt-3 d-none"></div>\n              <hr>\n              <div class="mb-2">\n                <label class="btn btn-outline-info btn-sm w-100">\n                  <i class="bi bi-box-arrow-in-down"></i> Import System Setup\n                  <input type="file" id="importSetupFile" hidden>\n                </label>\n                <div id="importMsg" class="small mt-2"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  ',document.getElementById("loginForm").onsubmit=function(e){e.preventDefault();const n=this.username.value.trim(),s=this.password.value,t=db.users.find(e=>e.username===n&&e.password===s);if(t)db.currentUser=t,saveDb(),window.location.hash="#user-dashboard";else{const e=document.getElementById("loginError");e.textContent="Invalid username or password!",e.classList.remove("d-none")}},document.getElementById("importSetupFile").addEventListener("change",function(e){const n=e.target.files[0];if(!n)return;const s=new FileReader;s.onload=function(e){try{const n=JSON.parse(e.target.result);db.facility=n.facility,db.settings=n.settings,db.users=n.users||[],db.registers=n.registers||[],db.roles=n.roles||[],db.servicesList=n.servicesList||[],db.customPatientFields=n.customPatientFields||[],saveDb(),document.getElementById("importMsg").innerHTML='<span class="text-success">System setup imported! You can now log in with your credentials.</span>',setTimeout(()=>window.location.reload(),1200)}catch(e){document.getElementById("importMsg").innerHTML='<span class="text-danger">Import failed: Invalid file.</span>'}},s.readAsText(n)})}